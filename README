SuperbackedDownloader (sbdl)

macOS shell script and LaunchAgent to automatically download Superbacked updates and auxiliary files

Current version: 0.3.1

Superbacked website: https://superbacked.com/
Superbacked on GitHub: https://github.com/superbacked/superbacked
Superbacked developer on GitHub: https://github.com/sunknudsen

NOTES

For SuperbackedDownloader to work, the Superbacked application itself needs to be installed on the same Mac as SuperbackedDownloader. If Superbacked is not installed, SuperbackedDownloader will just download the latest release over and over again.

If you are using your main instance of Superbacked on an air-gapped or factory-reset Mac, you should run this script/agent on your daily-driver Mac containing a placeholder installation of Superbacked.

When a new update has been released, the shell script will download the following files:

* main application (macOS DMG or Linux AppImage)
* SHA256 checksums file
* GPG .asc signature file for the checksums file
* release notes (.txt)

SCRIPT INSTALLATION

* download or clone this repository
* `chmod +x ./sbdl` (if necessary)
* downloaded repo: `cp ./sbdl /usr/local/bin/sbdl` (use sudo if you receive a permissions error)
* cloned repo: `ln -s ./sbdl /usr/local/bin/sbdl` (use sudo if you receive a permissions error)
* if you use a different path, you need to modify the agent's plist file accordingly (see below)

AGENT MODIFICATION

* rename file: replace '$USER' with your local macOS user name, i.e. with the output of `id -un` or of `echo $USER`
* open the agent's plist file in a text editor
* replace all instances of '$USER' with your local macOS user name
* OPTIONAL: modify the 'Program' key if you have installed the script into a different path than /usr/local/bin
* save & close

AGENT INSTALLATION

* `cp ./local.$USER.sbdl.plist ~/Library/LaunchAgents/local.$USER.sbdl.plist`
* `launchctl load ~/Library/LaunchAgents/local.$USER.sbdl.plist`
* `launchctl start local.$USER.sbdl.plist`

FILES CREATED

(1) Log: ~/Library/Logs/local.$USER.sbdl.log
(2a) Configuration directory: ~/Library/Application Support/SuperbackedDownloader
(2b) Configuration file: ~/Library/Application Support/SuperbackedDownloader/sbdl.cfg
(3) stdout & stderr created by the agent in /tmp

ERROR AT FIRST RUN

The initial run of the LaunchAgent will fail with an error, because the configuration file is still missing your personal software license key. You need to enter your license key manually.

MANDATORY CONFIGURATION

* open the file sbdl.cfg in a text editor
* License: replace '<yourLicenseKey>' with your actual software license key
* save & close

OPTIONAL CONFIGURATION

* open the file sbdl.cfg in a text editor
* DownloadPath: enter a download directory (full path) to avoid downloading to ~/Downloads
* LinuxDownload: enter 'y' or 'yes' etc. to additionally download the Linux AppImage
* ReleaseLabel: enter 'op' as the software label if you are not using the default 'std' release
* save & close

OPTIONAL DEPENDENCIES

* lynx: install e.g. with Homebrew
NOTE: slightly more efficient than macOS' built-in cURL for extracting the latest version number from Superbacked's GitHub repo
* 7-zip: install e.g. with Homebrew
NOTE: the 7z command is only used to coarsely verify the integrity of an already downloaded Linux AppImage
